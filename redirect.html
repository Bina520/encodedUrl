<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirect URL</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        #adFrame {
            width: 100%;
            height: 320px; 
            border: none;
        }
    </style>
</head>
<body>
    <h1>Please wait a moment</h1>
    <p id="originalUrl"></p>
    <p id="countdown"></p>
    <iframe id="adFrame" src="https://postponeclement.com/ncc53nijfk?key=02d6efceaf8b7a7f564b99413c4b3056" style="display:none;"></iframe> 

    <script>
        function decodeUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            const shortUrl = urlParams.get('url'); 
            if (!shortUrl) {
                document.getElementById('originalUrl').innerText = "NOT URL.";
                return;
            }

            const base64Url = shortUrl.substring(0, 5); 
            const secretKey = '@'; 

            const decrypted = CryptoJS.AES.decrypt(atob(base64Url), secretKey).toString(CryptoJS.enc.Utf8);
            if (decrypted) {
                document.getElementById('originalUrl').innerText = `URL: ${decrypted}`;
                startCountdown(); 
            } else {
                document.getElementById('originalUrl').innerText = "NOT URL.";
            }
        }

        function startCountdown() {
            let countdown = 5; 
            const countdownElement = document.getElementById('countdown');
            countdownElement.innerText = `Please wait ${countdown} s...`;

            const interval = setInterval(() => {
                countdown--;
                countdownElement.innerText = `Please wait ${countdown} s...`;
                if (countdown <= 0) {
                    clearInterval(interval);
                    window.location.href = document.getElementById('originalUrl').innerText.replace('URL: ', ''); 
                }
            }, 1000);
        }

        window.onload = function() {
            decodeUrl(); 
            document.getElementById('adFrame').style.display = 'block'; 
        };
    </script>
</body>
</html>
