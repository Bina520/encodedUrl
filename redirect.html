<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giải mã URL</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsencrypt/3.0.0/jsencrypt.min.js"></script>
    <style>
        #adFrame {
            width: 100%;
            height: 300px; /* Chiều cao của iframe */
            border: none;
        }
    </style>
</head>
<body>
    <h1>Giải mã URL</h1>
    <p id="originalUrl"></p>
    <p id="countdown"></p>
    <iframe id="adFrame" src="https://postponeclement.com/ncc53nijfk?key=02d6efceaf8b7a7f564b99413c4b3056" style="display:none;"></iframe> <!-- Thay thế bằng liên kết quảng cáo của bạn -->

    <script>
        const privateKey = `1`;

        function decodeUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            const finalUrl = urlParams.get('url'); // Lấy mã đã mã hóa từ URL
            if (!finalUrl) {
                document.getElementById('originalUrl').innerText = "Không có mã để giải mã.";
                return;
            }

            const encryptedUrl = finalUrl.substring(0, finalUrl.length - 5); // Lấy mã đã mã hóa (loại trừ 5 ký tự ngẫu nhiên)
            const decryptor = new JSEncrypt();
            decryptor.setPrivateKey(privateKey);
            const decrypted = decryptor.decrypt(encryptedUrl); // Giải mã bằng RSA

            if (decrypted) {
                document.getElementById('originalUrl').innerText = `URL gốc: ${decrypted}`;
                startCountdown(decrypted); // Bắt đầu đếm ngược với URL gốc
            } else {
                document.getElementById('originalUrl').innerText = "Không tìm thấy URL tương ứng với mã đã mã hóa.";
            }
        }

        function startCountdown(originalUrl) {
            let countdown = 5; // Thời gian đếm ngược
            const countdownElement = document.getElementById('countdown');
            countdownElement.innerText = `Chuyển hướng trong ${countdown} giây...`;

            const interval = setInterval(() => {
                countdown--;
                countdownElement.innerText = `Chuyển hướng trong ${countdown} giây...`;
                if (countdown <= 0) {
                    clearInterval(interval);
                    window.location.href = originalUrl; // Chuyển hướng đến URL gốc
                }
            }, 1000);
        }

        window.onload = function() {
            decodeUrl(); // Gọi hàm khi trang được tải
            document.getElementById('adFrame').style.display = 'block'; // Hiển thị iframe quảng cáo
        };
    </script>
</body>
</html>
